Code Review 报告

代码审查已完成，总体状态良好。以下是主要发现和修复项：

1. 代码质量与重构
Prompts 模块化: ✅ 新增 services/prompts.rs 成功将系统提示词、工具定义和格式化函数集中管理，消除了硬编码，极大提高了可维护性。
AI 行为控制: ✅ 在 ai.rs 中实现了健壮的系统提示词注入逻辑。通过 SYSTEM_PROMPT_WITH_TOOLS，明确约束了 AI 仅在被要求时才调用截图工具，有效解决了“问候也截图”的问题。
Lint 修复: ✅ 为暂时未使用的辅助函数添加了 #[allow(dead_code)]，消除了编译警告。
2. UI/UX 改进
下拉菜单显示: ✅ 通过增大输入模式的默认高度（从 ~200px 增至 380px），解决了模型选择下拉菜单被窗口裁剪的问题。这比复杂的 Portal/Hacking 方案更简单稳定。
前后端同步: 🔧 [已修复] 发现前端 window.ts 中的 INPUT_HEIGHT (140) 与后端 lib.rs 的 INPUT_H (380) 不一致。已将前端常量更新为 380，防止窗口尺寸重置时出现突变。
3. 下一步建议
观察体验: 此时输入窗口默认较高，建议观察用户对空间占用的反馈。
持续优化: 如果将来增加更多模型，380px 可能还不够，届时可以考虑实现真正的“点击即展开窗口”的动态逻辑（虽然更复杂）。